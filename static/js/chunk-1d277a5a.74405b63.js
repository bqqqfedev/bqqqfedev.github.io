(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d277a5a"],{"39a5":function(t,e,n){},a1d0:function(t,e,n){"use strict";var a=n("e6cf"),i=n.n(a);i.a},e6cf:function(t,e,n){},f711:function(t,e,n){"use strict";var a=n("39a5"),i=n.n(a);i.a},fdf1:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"price"},[n("div",{staticClass:"price_container"},[n("div",{staticClass:"time"},[t._v(t._s(t._f("parseTime")(t.priceDetail.time)))]),t._v(" "),n("div",{staticClass:"prices"},[t._v("最高价:  "),n("strong",[t._v(t._s(t.priceDetail.max_price))])]),t._v(" "),n("freshButton",{nativeOn:{click:function(e){return t.getWorkStatus(e)}}})],1),t._v(" "),n("div",{staticClass:"price_button"},[n("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t.confirmWord[t.priceDetail.confirmed]))])],1),t._v(" "),n("hr"),t._v(" "),n("div",[n("span",[t._v("查询未发放用户")]),t._v(" "),n("br"),t._v(" "),n("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期",change:"dateChange()","picker-options":t.pickerOptions},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[n("el-table-column",{attrs:{label:"id"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.sendBonus(e.row)}}},[t._v("发放奖励")])]}}])})],1)],1)])},i=[],c=n("bc3a"),r=n.n(c),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"freshBtn"},[n("i",{staticClass:"el-icon-refresh",class:{rotate:t.triggerRotate},on:{click:t.rotate}})])},o=[],u={name:"freshButton",components:{},data:function(){return{triggerRotate:!1}},props:{},computed:{},created:function(){},mounted:function(){},methods:{rotate:function(){var t=this;this.triggerRotate=!0,setTimeout(function(){t.triggerRotate=!1},1600)}}},l=u,f=(n("a1d0"),n("2877")),d=Object(f["a"])(l,s,o,!1,null,"11e6b502",null),p=d.exports,m={name:"Price",components:{freshButton:p},data:function(){return{priceDetail:{confirmed:0,time:null,max_price:0},date:null,list:[],confirmWord:["确认价格","价格已经确认,是否发放奖励?","正在发放奖励","已经发放完奖励"],pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}}}},created:function(){this.getWorkStatus()},methods:{query:function(){var t=this;r.a.get("/api/backend/profile/query?time="+this.date.getTime()).then(function(e){e.data.result&&(t.list=e.data.result)}).catch(function(t){})},sendBonus:function(t){var e=this;r.a.get("/user/api/profile/send?time="+this.date.getTime()+"&userId="+t).then(function(t){e.$message(t.data.msg),e.query()}).catch(function(t){})},confirm:function(){var t=this;0===this.priceDetail.confirmed&&r.a.post("/api/backend/price/confirm").then(function(e){0===e.data.status&&t.getWorkStatus()}).catch(function(t){}),1===this.priceDetail.confirmed&&this.$confirm("价格为 ".concat(this.priceDetail.max_price," 是否确认发放"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.a.post("/api/backend/profile/allowBonus").then(function(e){0===e.data.status&&(t.getWorkStatus(),t.$message({type:"success",message:"发放成功!"}))}).catch(function(t){})}).catch(function(){t.$message({type:"info",message:"已取消发放"})})},getWorkStatus:function(){var t=this;r.a.post("/api/backend/price/yesterdayPrice").then(function(e){0===e.data.status&&(t.priceDetail=e.data.result)}).catch(function(t){})}}},h=m,v=(n("f711"),Object(f["a"])(h,a,i,!1,null,"1feb483d",null));e["default"]=v.exports}}]);